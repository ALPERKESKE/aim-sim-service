<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Simulator - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <div style="text-align: center; margin-bottom: 20px;">
            <h1 style="color:#333; margin-bottom: 5px;">Berlin Tech Solutions GmbH</h1>
            <p style="color:#666;">BugÃ¼nkÃ¼ toplantÄ±larÄ±nÄ±zÄ± seÃ§in ve ekibi yÃ¶netin.</p>
        </div>

        <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">ğŸ‘¥ Ekip ArkadaÅŸlarÄ±n (ToplantÄ±ya KatÄ±lacaklarÄ± SeÃ§in)</h3>
        <div class="team-section" id="team-section">
            <div class="team-card selectable-team-card" data-member="Thomas">
                <input type="checkbox" class="team-checkbox" id="team-thomas" checked>
                <div class="team-avatar thomas-av">T</div>
                <strong>Thomas (Lead)</strong>
                <p style="font-size:0.8rem; color:#666;">SonuÃ§ odaklÄ±, sakin. Ã‡Ã¶zÃ¼m istiyor. Normal tempo ile konuÅŸur.</p>
            </div>
            <div class="team-card selectable-team-card" data-member="Sarah">
                <input type="checkbox" class="team-checkbox" id="team-sarah" checked>
                <div class="team-avatar sarah-av">S</div>
                <strong>Sarah (Senior)</strong>
                <p style="font-size:0.8rem; color:#666;">Teknik uzman. âš¡ Ã‡ok hÄ±zlÄ± konuÅŸur, teknik detaylarÄ± hÄ±zlÄ±ca sÄ±ralar.</p>
            </div>
            <div class="team-card selectable-team-card" data-member="Mark">
                <input type="checkbox" class="team-checkbox" id="team-mark" checked>
                <div class="team-avatar mark-av">M</div>
                <strong>Mark (PO)</strong>
                <p style="font-size:0.8rem; color:#666;">MÃ¼ÅŸteri odaklÄ±. ğŸ˜Š GÃ¼nlÃ¼k konuÅŸma tarzÄ±, rahat ve samimi.</p>
            </div>
        </div>

        <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">ğŸ“‹ Bekleyen ToplantÄ±lar</h3>
        <div id="mission-grid" class="mission-grid">
            </div>

        <div class="start-btn-container">
            <button id="start-simulation-btn">ToplantÄ±ya KatÄ±l â¤</button>
        </div>
    </div>

    <style>
        .selectable-team-card {
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        .selectable-team-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .selectable-team-card.selected {
            border: 2px solid #007bff;
            background-color: #f0f8ff;
        }
        .team-checkbox {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
    </style>
    <script type="module">
        import { SCENARIO_INFO } from './scenarios.js';

        const grid = document.getElementById('mission-grid');
        const startBtn = document.getElementById('start-simulation-btn');
        let selectedScenario = null;

        // Ekip Ã¼yesi seÃ§im mantÄ±ÄŸÄ±
        document.querySelectorAll('.selectable-team-card').forEach(card => {
            const checkbox = card.querySelector('.team-checkbox');
            
            card.addEventListener('click', (e) => {
                if (e.target !== checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
                updateCardSelection(card, checkbox.checked);
            });
            
            checkbox.addEventListener('change', (e) => {
                updateCardSelection(card, e.target.checked);
            });
            
            // BaÅŸlangÄ±Ã§ta hepsi seÃ§ili
            updateCardSelection(card, true);
        });

        function updateCardSelection(card, isSelected) {
            if (isSelected) {
                card.classList.add('selected');
            } else {
                card.classList.remove('selected');
            }
        }

        function getSelectedMembers() {
            const selected = [];
            document.querySelectorAll('.team-checkbox:checked').forEach(checkbox => {
                const card = checkbox.closest('.selectable-team-card');
                selected.push(card.dataset.member);
            });
            return selected;
        }

        // SenaryolarÄ± Ekrana Bas
        for (const [key, info] of Object.entries(SCENARIO_INFO)) {
            const card = document.createElement('div');
            card.className = 'mission-card-select';
            card.innerHTML = `
                <h4 style="margin:0 0 5px 0; color:#333;">${info.title}</h4>
                <p style="font-size:0.9rem; color:#666; margin:0;">${info.desc}</p>
            `;
            
            // SeÃ§im MantÄ±ÄŸÄ±
            card.onclick = () => {
                // Ã–ncekileri temizle
                document.querySelectorAll('.mission-card-select').forEach(c => c.classList.remove('active'));
                // Yeniyi seÃ§
                card.classList.add('active');
                selectedScenario = key;
                startBtn.classList.add('ready');
                startBtn.innerText = `"${info.title}" BaÅŸlat â¤`;
            };
            grid.appendChild(card);
        }

        // Butona TÄ±klayÄ±nca
        startBtn.onclick = () => {
            if (selectedScenario) {
                const selectedMembers = getSelectedMembers();
                if (selectedMembers.length === 0) {
                    alert('LÃ¼tfen en az bir ekip arkadaÅŸÄ± seÃ§in!');
                    return;
                }
                // SeÃ§ilen senaryo ve ekip Ã¼yelerini URL parametresi olarak gÃ¶nder
                const membersParam = selectedMembers.join(',');
                window.location.href = `simulation.html?scenario=${selectedScenario}&members=${membersParam}`;
            }
        };
    </script>
</body>
</html>