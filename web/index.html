<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Simulator - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <div style="text-align: center; margin-bottom: 20px;">
            <h1 style="color:#333; margin-bottom: 5px;">Berlin Tech Solutions GmbH</h1>
            <p style="color:#666;">BugÃ¼nkÃ¼ toplantÄ±larÄ±nÄ±zÄ± seÃ§in ve ekibi yÃ¶netin.</p>
        </div>

        <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">ğŸ‘¥ Ekip ArkadaÅŸlarÄ±n (ToplantÄ±ya KatÄ±lacaklarÄ± SeÃ§in)</h3>
        <div class="team-section" id="team-section">
            <div class="team-card selectable-team-card" data-member="Thomas">
                <input type="checkbox" class="team-checkbox" id="team-thomas" checked>
                <div class="team-avatar thomas-av">T</div>
                <strong>Thomas (Lead)</strong>
                <p style="font-size:0.8rem; color:#666;">SonuÃ§ odaklÄ±, sakin. Ã‡Ã¶zÃ¼m istiyor. Normal tempo ile konuÅŸur.</p>
            </div>
            <div class="team-card selectable-team-card" data-member="Sarah">
                <input type="checkbox" class="team-checkbox" id="team-sarah" checked>
                <div class="team-avatar sarah-av">S</div>
                <strong>Sarah (Senior)</strong>
                <p style="font-size:0.8rem; color:#666;">Teknik uzman. âš¡ Ã‡ok hÄ±zlÄ± konuÅŸur, teknik detaylarÄ± hÄ±zlÄ±ca sÄ±ralar.</p>
            </div>
            <div class="team-card selectable-team-card" data-member="Mark">
                <input type="checkbox" class="team-checkbox" id="team-mark" checked>
                <div class="team-avatar mark-av">M</div>
                <strong>Mark (PO)</strong>
                <p style="font-size:0.8rem; color:#666;">MÃ¼ÅŸteri odaklÄ±. ğŸ˜Š GÃ¼nlÃ¼k konuÅŸma tarzÄ±, rahat ve samimi.</p>
            </div>
            <div class="team-card selectable-team-card" data-member="Lukas">
                <input type="checkbox" class="team-checkbox" id="team-lukas" checked>
                <div class="team-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">L</div>
                <strong>Lukas (Senior Engineer)</strong>
                <p style="font-size:0.8rem; color:#666;">Bavyera'dan. ğŸº Bavyera lehÃ§esi konuÅŸur, direkt ve pragmatik.</p>
            </div>
        </div>

        <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">ğŸ“‹ Bekleyen ToplantÄ±lar</h3>
        <div id="mission-grid" class="mission-grid">
            </div>

        <div class="start-btn-container">
            <button id="start-simulation-btn">ToplantÄ±ya KatÄ±l â¤</button>
        </div>
    </div>

    <!-- KullanÄ±cÄ± AdÄ± GiriÅŸ ModalÄ± (Dashboard'da) -->
    <div id="username-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
            <h2 style="margin-top: 0;">ToplantÄ±ya KatÄ±l</h2>
            
            <!-- SeÃ§im Ã–zeti -->
            <div id="selection-summary" style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                <p style="margin: 0 0 10px 0; font-weight: bold; color: #333;">SeÃ§imleriniz:</p>
                <p id="summary-scenario" style="margin: 5px 0; color: #666;"></p>
                <p id="summary-members" style="margin: 5px 0; color: #666;"></p>
            </div>
            
            <p style="color: #666; margin-bottom: 20px;">LÃ¼tfen adÄ±nÄ±zÄ± girin:</p>
            <input type="text" id="username-input" placeholder="AdÄ±nÄ±z..." style="width: 100%; padding: 10px; font-size: 16px; border: 2px solid #ddd; border-radius: 5px; margin-bottom: 15px;" autocomplete="off">
            <div style="display: flex; gap: 10px;">
                <button id="cancel-btn" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">Ä°ptal</button>
                <button id="join-meeting-btn" style="flex: 1; padding: 12px; background: #007bff; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">ToplantÄ±ya KatÄ±l â¤</button>
            </div>
        </div>
    </div>

    <style>
        .selectable-team-card {
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        .selectable-team-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .selectable-team-card.selected {
            border: 2px solid #007bff;
            background-color: #f0f8ff;
        }
        .team-checkbox {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
    </style>
    <script type="module">
        import { SCENARIO_INFO } from './scenarios.js';

        const grid = document.getElementById('mission-grid');
        const startBtn = document.getElementById('start-simulation-btn');
        let selectedScenario = null;

        // Ekip Ã¼yesi seÃ§im mantÄ±ÄŸÄ±
        document.querySelectorAll('.selectable-team-card').forEach(card => {
            const checkbox = card.querySelector('.team-checkbox');
            
            card.addEventListener('click', (e) => {
                if (e.target !== checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
                updateCardSelection(card, checkbox.checked);
            });
            
            checkbox.addEventListener('change', (e) => {
                updateCardSelection(card, e.target.checked);
            });
            
            // BaÅŸlangÄ±Ã§ta hepsi seÃ§ili
            updateCardSelection(card, true);
        });

        function updateCardSelection(card, isSelected) {
            if (isSelected) {
                card.classList.add('selected');
            } else {
                card.classList.remove('selected');
            }
        }

        function getSelectedMembers() {
            const selected = [];
            document.querySelectorAll('.team-checkbox:checked').forEach(checkbox => {
                const card = checkbox.closest('.selectable-team-card');
                selected.push(card.dataset.member);
            });
            return selected;
        }

        // SenaryolarÄ± Ekrana Bas
        for (const [key, info] of Object.entries(SCENARIO_INFO)) {
            const card = document.createElement('div');
            card.className = 'mission-card-select';
            card.innerHTML = `
                <h4 style="margin:0 0 5px 0; color:#333;">${info.title}</h4>
                <p style="font-size:0.9rem; color:#666; margin:0;">${info.desc}</p>
            `;
            
            // SeÃ§im MantÄ±ÄŸÄ±
            card.onclick = () => {
                // Ã–ncekileri temizle
                document.querySelectorAll('.mission-card-select').forEach(c => c.classList.remove('active'));
                // Yeniyi seÃ§
                card.classList.add('active');
                selectedScenario = key;
                startBtn.classList.add('ready');
                startBtn.innerText = `"${info.title}" BaÅŸlat â¤`;
            };
            grid.appendChild(card);
        }

        // Modal elementleri
        const usernameModal = document.getElementById('username-modal');
        const usernameInput = document.getElementById('username-input');
        const joinMeetingBtn = document.getElementById('join-meeting-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const summaryScenario = document.getElementById('summary-scenario');
        const summaryMembers = document.getElementById('summary-members');

        // Butona TÄ±klayÄ±nca - Modal gÃ¶ster
        startBtn.onclick = () => {
            if (selectedScenario) {
                const selectedMembers = getSelectedMembers();
                if (selectedMembers.length === 0) {
                    alert('LÃ¼tfen en az bir ekip arkadaÅŸÄ± seÃ§in!');
                    return;
                }
                
                // Senaryo bilgisini gÃ¶ster
                const scenarioInfo = SCENARIO_INFO[selectedScenario];
                summaryScenario.textContent = `ğŸ“‹ Senaryo: ${scenarioInfo.title}`;
                summaryMembers.textContent = `ğŸ‘¥ KatÄ±lÄ±mcÄ±lar: ${selectedMembers.join(', ')}`;
                
                // Modal'Ä± gÃ¶ster
                usernameModal.style.display = 'flex';
                usernameInput.focus();
            } else {
                alert('LÃ¼tfen bir toplantÄ± senaryosu seÃ§in!');
            }
        };

        // Ä°ptal butonu
        cancelBtn.onclick = () => {
            usernameModal.style.display = 'none';
            usernameInput.value = '';
        };

        // ToplantÄ±ya KatÄ±l butonu
        joinMeetingBtn.onclick = () => {
            const username = usernameInput.value.trim();
            if (!username) {
                alert('LÃ¼tfen adÄ±nÄ±zÄ± girin!');
                usernameInput.focus();
                return;
            }
            
            const selectedMembers = getSelectedMembers();
            const membersParam = selectedMembers.join(',');
            
            // KullanÄ±cÄ± adÄ±nÄ± localStorage'a kaydet (simulation.html'de kullanmak iÃ§in)
            localStorage.setItem('username', username);
            
            // simulation.html'e yÃ¶nlendir
            window.location.href = `simulation.html?scenario=${selectedScenario}&members=${membersParam}`;
        };

        // Enter tuÅŸu ile katÄ±l
        usernameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                joinMeetingBtn.click();
            }
        });
    </script>
</body>
</html>